List_screen As screen:
    OnVisible: |-
        =//未選択とグループ名、採点者名、会場名のコレクションを定義
        Reset(Sort_dropdown_1);
        ClearCollect(group_col,{name:"グループを選択",isDef: true});
        Collect(group_col,AddColumns(Group_table.name,"isDef",false));
        
        ClearCollect(grader_col,{name:"採点者を選択",isDef:true});
        Collect(grader_col,AddColumns(User_table.name,"isDef",false));
        
        ClearCollect(venue_col,{name:"会場を選択",isDef:true});
        Collect(venue_col,AddColumns(Venue_table.name,"isDef",false));
        
        ClearCollect(eval_col,{name:"項目を選択",val:"def",isDef:true});
        Collect(eval_col,{name:"評価1",val:"evaluation_1",isDef:false},{name:"評価2",val:"evaluation_2",isDef:false},{name:"評価3",val:"evaluation_3",isDef:false},{name:"評価4",val:"evaluation_4",isDef:false},{name:"評価5",val:"evaluation_5",isDef:false},{name:"評価6",val:"evaluation_6",isDef:false},{name:"合計得点",val:"evaluation_total",isDef:false});
        
        UpdateContext({
            isDef_group:true,isDef_grader:true,isDef_venue:true,isDef_eval:true,
            sorted_table:Grading_table
        });

    List_gallery As gallery.galleryVertical:
        Height: =389
        Items: |-
            =If(
                isDef_group&&isDef_grader&&isDef_venue,
                //条件未選択時
                sorted_table,
                //条件選択時
                Filter(sorted_table,
                //グループ条件処理
                If(isDef_group,true,group_id = LookUp(Group_table,name = Group_dropdown_1.Selected.name,ID))&&
                //採点者条件処理
                If(isDef_grader,true,user_id = LookUp(User_table,name = Grader_dropdown_2.Selected.name,ID))&&
                //会場条件処理
                If(isDef_venue,true,venue_id = LookUp(Venue_table,name = Venue_dropdown_3.Selected.name,ID))
            ))
        Layout: =Layout.Vertical
        OnSelect: =Navigate(View_screen)
        TemplateSize: =61
        Width: =1079
        X: =31
        Y: =243
        ZIndex: =1

        gal_group As group:
            Height: =5
            Width: =5
            X: =40
            Y: =40
            ZIndex: =13

            group_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =LookUp(Group_table, ID = ThisItem.group_id,name)
                Width: =106
                X: =21
                ZIndex: =1

            grader_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =LookUp(User_table,ID = ThisItem.user_id,name)
                Width: =112
                X: =130
                ZIndex: =2

            vanue_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =LookUp(Venue_table,ID = ThisItem.venue_id,name)
                Width: =112
                X: =242
                ZIndex: =3

            date_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =Text(LookUp(Venue_table,ID = ThisItem.venue_id,date),"mm/dd")
                Width: =112
                X: =354
                ZIndex: =4

            room_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =LookUp(Venue_table,ID = ThisItem.venue_id,room_name)
                Width: =112
                X: =466
                ZIndex: =5

            eval1_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.evaluation_1
                Width: =71
                X: =578
                ZIndex: =6

            eval2_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.evaluation_2
                Width: =71
                X: =649
                ZIndex: =7

            eval3_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.evaluation_3
                Width: =71
                X: =720
                ZIndex: =8

            eval4_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.evaluation_4
                Width: =71
                X: =788
                ZIndex: =9

            eval5_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.evaluation_5
                Width: =72
                X: =848
                ZIndex: =10

            eval6_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =ThisItem.evaluation_6
                Width: =65
                X: =920
                ZIndex: =11

            total_val As label:
                Align: =Align.Center
                Height: =49
                OnSelect: =Select(Parent)
                Size: =16
                Text: =Round(ThisItem.evaluation_total,0)
                Width: =71
                X: =985
                ZIndex: =12

    Icon1_4 As icon.ChevronLeft:
        Icon: =Icon.ChevronLeft
        OnSelect: =Navigate(Modeselect_screen, ScreenTransition)
        X: =40
        Y: =40
        ZIndex: =14

    lab_group As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =14

        group_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="グループ"
            Width: =113
            X: =50
            Y: =187
            ZIndex: =2

        grader_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="採点者"
            Width: =113
            X: =163
            Y: =187
            ZIndex: =3

        vanue_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="会場"
            Width: =113
            X: =276
            Y: =187
            ZIndex: =4

        date_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="日付"
            Width: =113
            X: =389
            Y: =187
            ZIndex: =5

        room_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="教室"
            Width: =113
            X: =502
            Y: =187
            ZIndex: =6

        eval1_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="評価1"
            Width: =68
            X: =615
            Y: =187
            ZIndex: =7

        eval2_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="評価2"
            Width: =68
            X: =683
            Y: =187
            ZIndex: =8

        eval3_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="評価3"
            Width: =68
            X: =751
            Y: =187
            ZIndex: =9

        eval4_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="評価4"
            Width: =68
            X: =819
            Y: =187
            ZIndex: =10

        eval5_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="評価5"
            Width: =68
            X: =887
            Y: =187
            ZIndex: =11

        eval6_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: |-
                ="評価6
                "
            Width: =68
            X: =955
            Y: =187
            ZIndex: =12

        total_label As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(39, 113, 194, 1)
            Height: =56
            Size: =16
            Text: ="合計"
            Width: =68
            X: =1023
            Y: =187
            ZIndex: =13

    Rectangle1 As rectangle:
        Fill: =RGBA(136, 160, 209, 1)
        Height: =69
        Width: =1041
        X: =50
        Y: =117
        ZIndex: =15

    Label6 As label:
        Height: =26
        Size: =15
        Text: ="絞り込み"
        Width: =291
        X: =74
        Y: =117
        ZIndex: =16

    Label7 As label:
        Height: =26
        Size: =15
        Text: ="並び替え"
        Width: =344
        X: =710
        Y: =117
        ZIndex: =17

    Grader_dropdown_2 As dropdown:
        Height: =30
        Items: =grader_col.name
        OnChange: |-
            =UpdateContext({
                isDef_grader:LookUp(grader_col,name = Self.Selected.name,isDef)
            })
        Size: =12
        Width: =170
        X: =263
        Y: =150
        ZIndex: =19

    Venue_dropdown_3 As dropdown:
        Height: =30
        Items: =venue_col.name
        OnChange: |-
            =UpdateContext({
                isDef_venue:LookUp(venue_col,name = Self.Selected.name,isDef)
            })
        Size: =12
        Width: =170
        X: =465
        Y: =150
        ZIndex: =20

    Sort_dropdown_2 As dropdown:
        Height: =30
        Items: =["昇順","降順"]
        OnChange: |-
            =UpdateContext({
            sorted_table:If(
                LookUp(eval_col,name = Sort_dropdown_1.Selected.name,isDef),
                //並び替え未選択時
                Grading_table,
                //並び替え選択時
                SortByColumns(
                    Grading_table,
                    LookUp(eval_col,name = Sort_dropdown_1.Selected.name,val),
                    If(Sort_dropdown_2.Selected.Value = "昇順",SortOrder.Ascending,SortOrder.Descending)
                    )
                )})
        Size: =12
        Width: =170
        X: =905
        Y: =150
        ZIndex: =22

    Group_dropdown_1 As dropdown:
        Default: ="グループ"
        Height: =30
        Items: =group_col.name
        OnChange: |-
            =UpdateContext({isDef_group:LookUp(group_col,name = Self.Selected.name,isDef)})
        Size: =12
        Width: =170
        X: =74
        Y: =150
        ZIndex: =23

    Sort_dropdown_1 As dropdown:
        Height: =30
        Items: =eval_col.name
        OnChange: |-
            =UpdateContext({isDef_eval:LookUp(eval_col,name = Self.Selected.name,isDef),
            sorted_table:If(
                LookUp(eval_col,name = Self.Selected.name,isDef),
                //並び替え未選択時
                Grading_table,
                //並び替え選択時
                SortByColumns(
                    Grading_table,
                    LookUp(eval_col,name = Sort_dropdown_1.Selected.name,val),
                    If(Sort_dropdown_2.Selected.Value = "昇順",SortOrder.Ascending,SortOrder.Descending)
                    )
                )
            })
        Size: =12
        Width: =170
        X: =710
        Y: =150
        ZIndex: =24

